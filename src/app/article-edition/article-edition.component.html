<div class="container mt-5">
    <h2>{{ isEditing ? 'Edit Article' : 'Create New Article' }}</h2>

    <form (ngSubmit)="onSubmit()" #articleForm="ngForm">
        <div class="mb-3">
            <label for="title" class="form-label">Title</label>
            <input type="text" id="title" class="form-control" [(ngModel)]="article['title']" name="title" required />
            <div *ngIf="articleForm.submitted && !articleForm.controls['title']?.valid" class="text-danger">Title is required</div>
        </div>

        <div class="mb-3">
            <label for="subtitle" class="form-label">Subtitle</label>
            <input type="text" id="subtitle" class="form-control" [(ngModel)]="article['subtitle']" name="subtitle" required />
            <div *ngIf="articleForm.submitted && !articleForm.controls['subtitle']?.valid" class="text-danger">Subtitle is required</div>
        </div>

        <div class="mb-3">
            <label for="abstract" class="form-label">Abstract</label>
            <textarea id="abstract" class="form-control" [(ngModel)]="article['abstract']" name="abstract" required></textarea>
            <div *ngIf="articleForm.submitted && !articleForm.controls['abstract']?.valid" class="text-danger">Abstract is required</div>
        </div>

        <div class="mb-3">
            <label for="category" class="form-label">Category</label>
            <select id="category" class="form-select" [(ngModel)]="article['category']" name="category" required>
                <option value="">Select a category</option>
                <option *ngFor="let category of categories" [value]="category">{{ category }}</option>
            </select>
            <div *ngIf="articleForm.submitted && !articleForm.controls['category']?.valid" class="text-danger">Category is required</div>
        </div>

        <div class="mb-3">
            <label for="body" class="form-label">Body</label>
            <editor [(ngModel)]="article['body']" name="body"></editor>
        </div>

        <div class="mb-3">
            <label for="image" class="form-label">Select Image</label>
            <input type="file" id="image" (change)="onFileSelect($event)" class="form-control" />
        </div>

        <div class="d-flex justify-content-between">
            <button type="button" class="btn btn-secondary" (click)="goBack()">Back to Articles</button>
            <button type="submit" class="btn btn-primary">{{ isEditing ? 'Save Changes' : 'Create Article' }}</button>
        </div>

        <div *ngIf="feedbackMessage" class="alert alert-success mt-3">{{ feedbackMessage }}</div>
    </form>
</div>
